(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{32:function(e,t,a){},46:function(e,t,a){},5343:function(e,t,a){e.exports=a(5548)},5361:function(e,t,a){},5542:function(e,t,a){},5548:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(16),r=a.n(c),l=a(17),s=a(18),i=a(20),u=a(19),m=a(21),d=a(5550),p=a(5551),h=(a(32),a(31)),v=a(60),b=a.n(v),f=a(124),E=a.n(f),g=(a(5361),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).handleMessageReceived=function(e){var t=e.message,n=JSON.parse(t);if("audio"===n.type){var o=n.url;a.setState({url:o})}else"command"===n.type&&"gotoinvision"===n.command&&(window.location="https://invis.io/3RQGIJF2H5C#/346229432_S1/")},a.handleError=function(e){"PNUnknownCategory"===e.category&&console.log(e.errorData.message)},a.pubnub=new b.a({subscribeKey:"sub-c-634d2abe-28df-11e9-991a-bee2ac9fced0"}),a.pubnub.init(Object(h.a)(Object(h.a)(a))),a.state={url:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.pubnub.subscribe({channels:["default"],withPresence:!0}),this.pubnub.addListener({status:this.handleError,message:this.handleMessageReceived})}},{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:["default"]})}},{key:"render",value:function(){return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"hero"}),o.a.createElement("div",{className:"speechOut"}),o.a.createElement(E.a,{src:this.state.url,autoPlay:!0}))}}]),t}(n.Component)),y=a(34),S=a.n(y),k=a(35),O=a.n(k),N=a(79),j=a.n(N),C=a(62),w=a.n(C),x=a(80),W=a.n(x),M=a(44),F=a.n(M),T=a(36),U=a.n(T),D=a(127),B=a.n(D),I=a(128),A=a.n(I),J=a(30),R=a.n(J),P=a(26),L=a(125),H=a.n(L),K=(a(46),a(61)),V=a.n(K),G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getText=function(){return a.state.text},a.handleChanged=function(e){a.setState({text:e.target.value})},a.state={text:""},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(V.a,{multiline:this.props.longform,fullWidth:this.props.longform,onChange:this.handleChanged,label:"text"})}}]),t}(n.Component),z=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,o=new Array(n),c=0;c<n;c++)o[c]=arguments[c];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).getText=function(){for(var e="",t=a.props.data,n=0;n<t.length;n++){var o=t[n];if("%input%"===o||"%longform%"===o)e+=a.refs[String(n)].getText();else e+=o;e+=" "}return e},a.handleClick=function(){var e=a.getText();a.props.onSend(e)},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"viewsForData",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];"%input%"===n?t.push(o.a.createElement("div",{className:"input",key:a},o.a.createElement(G,{ref:String(a)}))):"%longform%"===n?t.push(o.a.createElement(G,{longform:!0,ref:String(a),key:a})):t.push(o.a.createElement("h4",{id:String(a),key:a},n))}return t}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"section"},this.viewsForData(this.props.data)),null==this.props.onSend?null:o.a.createElement("div",{className:"buttons"},o.a.createElement(R.a,{className:"iconButton",color:"primary",variant:"contained",onClick:this.handleClick},o.a.createElement(P.c,null))))}}]),t}(n.Component),Q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).addField=function(){var e=a.state.protoSections;e.push("text"),a.setState({protoSections:e})},a.addLabel=function(){var e=a.state.protoSections;e.push("%input%"),a.setState({protoSections:e})},a.state={protoSections:["text"]},a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"viewsForData",value:function(){for(var e=[],t=0;t<this.state.protoSections.length;t++){"text"===this.state.protoSections[t]?e.push(o.a.createElement("div",{className:"input",key:t},o.a.createElement(G,{ref:String(t)}))):e.push(o.a.createElement(V.a,{disabled:!0,key:t,label:"wildcard",variant:"outlined",margin:"normal"}))}return e}},{key:"getSections",value:function(){for(var e=[],t=0;t<this.state.protoSections.length;t++){var a=this.state.protoSections[t];"text"===a?e.push(this.refs[String(t)].getText()):e.push(a)}return e}},{key:"render",value:function(){return o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"section"},this.viewsForData()),o.a.createElement("div",{className:"buttons"},o.a.createElement(R.a,{onClick:this.addField,className:"iconButton",variant:"contained",color:"primary"},o.a.createElement(P.g,null)),o.a.createElement(R.a,{onClick:this.addLabel,className:"iconButton",variant:"contained",color:"primary"},o.a.createElement(P.a,null))))}}]),t}(n.Component),$=[["Hi","%input%","how's your day so far?"],["What would you like to talk about in particular?"],["What's going on today?"],["Can you tell me more about","%input%","?"],["Why is ","%input%"," important to you?"],["Why was your day","%input%","?"],["Why else was your day","%input%","?"],["What's something you can do to get more","%input%","?"],["That sounds good!"],["Want me to put it on your to do list?"]],_="https://puppet-230708.appspot.com",q=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).sendText=function(e){H.a.post(_+"/broadcast",{text:e,voice:a.state.voice}).catch(function(e){console.log(e)})},a.sendMessage=function(e){var t={type:"internal",message:e};a.pubnub.publish({message:JSON.stringify(t),channel:"default"},function(e,t){e.error&&console.log(e)})},a.handleFileImport=function(e){e.stopPropagation(),e.preventDefault();var t=e.target.files[0],n=new FileReader;n.onload=function(e){var t=JSON.parse(e.target.result),n=a.state.customSections;a.setState({customSections:n.concat(t)})},n.readAsText(t)},a.import=function(){a.upload.click()},a.export=function(){var e=JSON.stringify(a.state.customSections),t="data:text/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","puppet-responses.json"),document.body.appendChild(n),n.click(),n.remove()},a.catchConvo=function(){var e="text,url\n"+a.commandlog.join("\n"),t="data:text/json;charset=utf-8,"+encodeURIComponent(e),n=document.createElement("a");n.setAttribute("href",t),n.setAttribute("download","puppet-log.csv"),document.body.appendChild(n),n.click(),n.remove()},a.openModal=function(){a.setState({modalOpen:!0})},a.closeModal=function(){a.setState({modalOpen:!1})},a.saveSection=function(){var e=a.state.customSections,t=a.builder.getSections();e.push(t),a.setState({customSections:e}),a.closeModal()},a.handleChangeVoice=function(e){a.setState({voice:e.target.value})},a.kickToInvision=function(){a.pubnub.publish({message:JSON.stringify({type:"command",command:"gotoinvision"}),channel:"default"},function(e,t){e.error&&console.log(e)})},a.handleMessageReceived=function(e){var t=e.message,n=JSON.parse(t);"internal"===n.type?a.setState({snackOpen:!0,snackMessage:n.message}):"audio"===n.type&&a.commandlog.push(n.text+","+n.url)},a.handleError=function(e){"PNUnknownCategory"===e.category&&console.log(e.errorData.message)},a.handleSnackClose=function(e,t){"clickaway"!==t&&a.setState({snackOpen:!1,snackMessage:""})},a.state={customSections:[],modalOpen:!1,voice:"en-US-Wavenet-E",snackOpen:!1,snackMessage:""},a.commandlog=[],a.pubnub=new b.a({publishKey:"pub-c-35c0a342-eb63-440b-b688-89d8ced6f499",subscribeKey:"sub-c-634d2abe-28df-11e9-991a-bee2ac9fced0"}),a.pubnub.init(Object(h.a)(Object(h.a)(a))),a}return Object(m.a)(t,e),Object(s.a)(t,[{key:"componentWillMount",value:function(){this.pubnub.subscribe({channels:["default"],withPresence:!1}),this.pubnub.addListener({status:this.handleError,message:this.handleMessageReceived})}},{key:"componentWillUnmount",value:function(){this.pubnub.unsubscribe({channels:["default"]})}},{key:"render",value:function(){var e=this,t=$.concat(this.state.customSections);return o.a.createElement("div",{className:"container"},o.a.createElement(W.a,{className:"modal-container",open:this.state.modalOpen},o.a.createElement(F.a,{className:"paper-modal"},o.a.createElement("div",{className:"header"},o.a.createElement(R.a,{onClick:this.closeModal,className:"iconButton",variant:"contained",color:"primary"},o.a.createElement(P.b,null))),o.a.createElement(Q,{ref:function(t){e.builder=t}}),o.a.createElement("div",{className:"modal-footer"},o.a.createElement(S.a,{onClick:this.saveSection,className:"footer-button",variant:"contained",color:"primary"},"Save")))),o.a.createElement(F.a,{className:"paper-container"},o.a.createElement("div",{className:"body"},o.a.createElement("div",{className:"inputs"},o.a.createElement("div",{className:"scrollable"},t.map(function(t,a){return o.a.createElement(z,{data:t,key:a,onSend:e.sendText})})),o.a.createElement(z,{data:["%longform%"],onSend:this.sendText}),o.a.createElement("div",{className:"vertical-spacer"}),o.a.createElement(w.a,{component:"legend"},"Internal Chat"),o.a.createElement(z,{data:["%longform%"],onSend:this.sendMessage})),o.a.createElement("div",{className:"voice-box"},o.a.createElement(j.a,{component:"fieldset"},o.a.createElement(w.a,{component:"legend"},"Voice"),o.a.createElement(B.a,{name:"gender1",value:this.state.voice,onChange:this.handleChangeVoice},o.a.createElement(O.a,{value:"en-US-Wavenet-A",control:o.a.createElement(U.a,null),label:"Wavenet A (Male)"}),o.a.createElement(O.a,{value:"en-US-Wavenet-B",control:o.a.createElement(U.a,null),label:"Wavenet B (Male)"}),o.a.createElement(O.a,{value:"en-US-Wavenet-D",control:o.a.createElement(U.a,null),label:"Wavenet D (Male)"}),o.a.createElement(O.a,{value:"en-US-Wavenet-C",control:o.a.createElement(U.a,null),label:"Wavenet C (Female)"}),o.a.createElement(O.a,{value:"en-US-Wavenet-E",control:o.a.createElement(U.a,null),label:"Wavenet E (Female)"}),o.a.createElement(O.a,{value:"en-US-Wavenet-F",control:o.a.createElement(U.a,null),label:"Wavenet F (Female)"}))))),o.a.createElement("div",{className:"footer"},o.a.createElement("input",{type:"file",ref:function(t){return e.upload=t},style:{display:"none"},onChange:this.handleFileImport}),o.a.createElement(S.a,{onClick:this.import,className:"footer-button",variant:"contained",color:"primary"},"Import"),o.a.createElement(S.a,{onClick:this.export,className:"footer-button",variant:"contained",color:"primary"},"Export"),o.a.createElement(S.a,{onClick:this.openModal,className:"footer-button",variant:"contained",color:"primary"},"Add New..."),o.a.createElement(S.a,{onClick:this.catchConvo,className:"footer-button",variant:"contained",color:"primary"},"Download Log"),o.a.createElement(S.a,{onClick:this.kickToInvision,className:"footer-button",variant:"contained",color:"primary"},"Go To Invision"))),o.a.createElement(A.a,{anchorOrigin:{vertical:"top",horizontal:"right"},autoHideDuration:6e3,open:this.state.snackOpen,onClose:this.handleSnackClose,ContentProps:{"aria-describedby":"message-id"},message:o.a.createElement("span",{id:"message-id"},this.state.snackMessage)}))}}]),t}(n.Component),X=a(5549),Y=a(64),Z=a.n(Y),ee=(a(5542),function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"container"},o.a.createElement("h1",null,"Hi, what is your mood?"),o.a.createElement("div",{className:"fab-container"},o.a.createElement(Z.a,{className:"startButton",component:X.a,to:"/client",color:"primary"},o.a.createElement(P.f,null)),o.a.createElement(Z.a,{className:"startButton",component:X.a,to:"/client",color:"primary"},o.a.createElement(P.d,null)),o.a.createElement(Z.a,{className:"startButton",component:X.a,to:"/client",color:"primary"},o.a.createElement(P.e,null)))),o.a.createElement("div",{className:"container"},o.a.createElement(X.a,{to:"/dashboard"},"Dashboard ",o.a.createElement("span",{role:"img","aria-label":"arrow"},"\u27a1\ufe0f"))))}}]),t}(n.Component)),te=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return o.a.createElement(d.a,{basename:"/puppet"},o.a.createElement("div",null,o.a.createElement(p.a,{exact:!0,path:"/",component:ee}),o.a.createElement(p.a,{path:"/dashboard",component:q}),o.a.createElement(p.a,{path:"/client",component:g})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(5546);r.a.render(o.a.createElement(te,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5343,2,1]]]);
//# sourceMappingURL=main.0b3ee5e1.chunk.js.map